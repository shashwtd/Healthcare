<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <title>HTML5 Game Development Tutorial | Spicy Yoghurt</title>
    <meta name="description" content="HTML5 game development tutorial">
    <meta name="author" content="Spicy Yoghurt">
</head>

<body>
    <canvas id="canvas" width="750" height="400" style="border:1px solid lightgrey;">
        Your browser does not support the HTML5 canvas tag.
    </canvas>
    <h2>Visit <a href="https://spicyyoghurt.com">spicyyoghurt.com</a> for more tutorials</h2>
    <script>
        "use strict";

        // Declare as variable
        let canvas;
        let context;
        let rectX = 0;
        let rectY = 0;
        let movingSpeed = 50;
        let secondsPassed = 0;
        let oldTimeStamp = 0;
        let timePassed = 0;

        // Listen to the onLoad event
        window.onload = init;

        // Trigger init function when the page has loaded
        function init() {
            canvas = document.getElementById('canvas');
            context = canvas.getContext('2d');

            // Request an animation frame for the first time
            // The gameLoop() function will be called as a callback of this request
            window.requestAnimationFrame(gameLoop);
        }

        function gameLoop(timeStamp) {
            // Calculate how much time has passed
            secondsPassed = (timeStamp - oldTimeStamp) / 1000;
            oldTimeStamp = timeStamp;

            // Update game objects
            update(secondsPassed);

            // Perform the drawing operation
            draw();

            // The loop function has reached it's end
            // Keep requesting new frames
            window.requestAnimationFrame(gameLoop);
        }

        function update(secondsPassed) {

            timePassed += secondsPassed

            // Set the speed of the objects
            // Use different easing functions for different effects
            rectX = easeInOutQuint(timePassed, 50, 500, 1.5);
            rectY = easeLinear(timePassed, 50, 250, 1.5);
        }

        // Example easing functions
        function easeInOutQuint (t, b, c, d) {
            if ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;
            return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;
        }

        function easeLinear (t, b, c, d) {
            return c * t / d + b;
        }

        function draw() {
            // Clear the canvas
            context.clearRect(0, 0, canvas.width, canvas.height);

            // Fill with red
            context.fillStyle = '#ff8080';

            // Draw a rectangle on the canvas
            context.fillRect(rectX, rectY, 150, 100);
        }
    </script>
</body>

</html>
